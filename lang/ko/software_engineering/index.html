



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://github.com/ConsenSys/smart-contract-best-practices/lang/ko/software_engineering/">
      
      
        <meta name="author" content="ConsenSys">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.5">
    
    
      
        <title>소프트웨어 공학 - Ethereum Smart Contract Best Practices</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.bcabdff3.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/ConsenSys/smart-contract-best-practices" title="Ethereum Smart Contract Best Practices" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Ethereum Smart Contract Best Practices
              </span>
              <span class="md-header-nav__topic">
                소프트웨어 공학
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/ConsenSys/smart-contract-best-practices/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Ethereum Smart Contract Best Practices
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/ConsenSys/smart-contract-best-practices/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../general_philosophy/" title="General Philosophy" class="md-nav__link">
      General Philosophy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../recommendations/" title="Recommendations for Smart Contract Security in Solidity" class="md-nav__link">
      Recommendations for Smart Contract Security in Solidity
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../known_attacks/" title="Known Attacks" class="md-nav__link">
      Known Attacks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../software_engineering/" title="Software Engineering Techniques" class="md-nav__link">
      Software Engineering Techniques
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../tokens/" title="Token specific recommendations" class="md-nav__link">
      Token specific recommendations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../documentation_procedures/" title="Documentation and Procedures" class="md-nav__link">
      Documentation and Procedures
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../security_tools/" title="Security Tools" class="md-nav__link">
      Security Tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../security_notifications/" title="Security Notifications" class="md-nav__link">
      Security Notifications
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../future_improvements/" title="Future improvements" class="md-nav__link">
      Future improvements
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../bibliography/" title="Smart Contract Security Bibliography" class="md-nav__link">
      Smart Contract Security Bibliography
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../about/reviewers/" title="Reviewers" class="md-nav__link">
      Reviewers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13" checked>
    
    <label class="md-nav__link" for="nav-13">
      Translations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Translations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13-1" type="checkbox" id="nav-13-1" checked>
    
    <label class="md-nav__link" for="nav-13-1">
      한국어
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-13-1">
        한국어
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="홈" class="md-nav__link">
      홈
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../general_philosophy/" title="기본 철학" class="md-nav__link">
      기본 철학
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recommendations/" title="보안을 위한 솔리디티 추천 패턴" class="md-nav__link">
      보안을 위한 솔리디티 추천 패턴
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../known_attacks/" title="알려진 공격 사례" class="md-nav__link">
      알려진 공격 사례
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        소프트웨어 공학
      </label>
    
    <a href="./" title="소프트웨어 공학" class="md-nav__link md-nav__link--active">
      소프트웨어 공학
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="고장난 컨트랙트의 업그레이드" class="md-nav__link">
    고장난 컨트랙트의 업그레이드
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuit-breakers" title="써킷브레이커(Circuit Breakers): 컨트랙트의 기능을 중지하기" class="md-nav__link">
    써킷브레이커(Circuit Breakers): 컨트랙트의 기능을 중지하기
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#speed-bumps" title="과속 방지턱(Speed Bumps): 컨트랙트 액션 지연" class="md-nav__link">
    과속 방지턱(Speed Bumps): 컨트랙트 액션 지연
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="비율 제한" class="md-nav__link">
    비율 제한
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-rollout" title="Contract Rollout" class="md-nav__link">
    Contract Rollout
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deprecation" title="자동 폐기(Deprecation)" class="md-nav__link">
    자동 폐기(Deprecation)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="사용자 및 컨트랙트에 들어가는 이더의 양을 제한할 것" class="md-nav__link">
    사용자 및 컨트랙트에 들어가는 이더의 양을 제한할 것
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="버그 바운티 프로그램" class="md-nav__link">
    버그 바운티 프로그램
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tokens/" title="토큰과 관련된 모범 사례" class="md-nav__link">
      토큰과 관련된 모범 사례
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../documentation_procedures/" title="문서화 및 절차" class="md-nav__link">
      문서화 및 절차
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security_tools/" title="보안 도구 모음" class="md-nav__link">
      보안 도구 모음
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security_notifications/" title="보안 소식" class="md-nav__link">
      보안 소식
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../future_improvements/" title="개선 사항들" class="md-nav__link">
      개선 사항들
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bibliography/" title="스마트 컨트랙트 보안 참고자료" class="md-nav__link">
      스마트 컨트랙트 보안 참고자료
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13-1-12" type="checkbox" id="nav-13-1-12">
    
    <label class="md-nav__link" for="nav-13-1-12">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-13-1-12">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/translators/" title="Translator" class="md-nav__link">
      Translator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/reviewers/" title="Reviewers" class="md-nav__link">
      Reviewers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" title="고장난 컨트랙트의 업그레이드" class="md-nav__link">
    고장난 컨트랙트의 업그레이드
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuit-breakers" title="써킷브레이커(Circuit Breakers): 컨트랙트의 기능을 중지하기" class="md-nav__link">
    써킷브레이커(Circuit Breakers): 컨트랙트의 기능을 중지하기
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#speed-bumps" title="과속 방지턱(Speed Bumps): 컨트랙트 액션 지연" class="md-nav__link">
    과속 방지턱(Speed Bumps): 컨트랙트 액션 지연
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" title="비율 제한" class="md-nav__link">
    비율 제한
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-rollout" title="Contract Rollout" class="md-nav__link">
    Contract Rollout
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deprecation" title="자동 폐기(Deprecation)" class="md-nav__link">
    자동 폐기(Deprecation)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" title="사용자 및 컨트랙트에 들어가는 이더의 양을 제한할 것" class="md-nav__link">
    사용자 및 컨트랙트에 들어가는 이더의 양을 제한할 것
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" title="버그 바운티 프로그램" class="md-nav__link">
    버그 바운티 프로그램
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ConsenSys/smart-contract-best-practices/edit/master/docs/lang/ko/software_engineering.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>소프트웨어 공학</h1>
                
                <p><a href="../general_philosophy">기본 철학</a> 항목에서 논의했던 것과 같이, 알려진 공격에 대처하는 것만으로는 충분하지 않습니다. 블록체인 프로그램에서는 실패에 대한 비용이 아주 높기 때문에, 소프트웨어를 작성할 때 리스크를 줄이는 쪽으로 생각하는 것에 반드시 적응해야 합니다.</p>
<p>우리가 주창하는 접근방법은 "실패에 대비하기"입니다. 코드가 안전한지 아닌지 완벽하게 미리 아는 것은 불가능합니다. 하지만, 컨트랙트를 설계할 때, 실패했을 경우 유연하게 대처할 수 있도록 설계할 수 있고 이를 통해 피해를 최소화할 수 있습니다. 이번 항목에서는 실패에 대비하는 다양한 기법들에 대해 소개하겠습니다.</p>
<p>Note: 시스템에 새로운 구성요소를 추가할 때 항상 리스크가 존재합니다. 잘못 디자인된 '실패 대비(fail-safe)'는 그 자체로 취약점이 될 수 있습니다. 또한 잘 설계된 다수의 '실패 대비(fail-safe)' 코드 사이의 상호 작용 또한 취약점이 될 수 있습니다. 견고한 시스템을 만들기 위해서는, 각 기법을 컨트랙트에 적용할 때 같이 동작할 경우엔 어떻게 되는지도 생각해보아야 합니다.</p>
<h3 id="_1">고장난 컨트랙트의 업그레이드<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>코드는 에러가 발견되거나 혹은 개선사항이 만들어졌을 때 변경을 요합니다. 버그를 발견했는데 처리할 수 없다면 좋지 않습니다.</p>
<p>스마트 컨트랙트를 위한 효율적인 업그레이드 시스템을 설계하는 것은 활발한 연구 분야이며, 이에 대한 모든 범위의 내용을 이 문서에 담기는 어렵기 때문에 가장 많이 사용되는 두 기본적인 접근방법을 소개합니다. 둘 중 더 단순한 방식은 레지스트리 컨트랙트를 사용하여 해당 컨트랙트가 최신 버전의 컨트랙트의 주소값을 가리키게 하는 것입니다. 컨트랙트 사용자를 위한 더욱 매끄러운 접근 방식은 호출과 데이터를 최신 버전의 컨트랙트에 전달하는 방식입니다.</p>
<p>어떤 방식을 사용하던지, 모듈화하고 구성요소를 잘 분리하는 것은 중요합니다. 이를 통해 코드 변경이 기능을 훼손하거나, 데이터를 잃거나, 포팅을 위해 상당한 양의 비용을 사용하는 일 등이 발생하지 않도록 할 수 있습니다. 특히 복잡한 로직을 데이터 스토리지와 분리해서 기능을 바꾸었을 때 데이터를 모두 변경할 필요가 없도록 하면 좋습니다.</p>
<p>또한 계약 당사자들이 코드를 업그레이드하는 것을 결정할 수 있는 안전한 방법을 가지는 것 또한 대단히 중요합니다. 컨트랙트에 따라, 코드의 변경이 한 신뢰 가능한 참가측으로부터 승인받도록 하거나 전체 이해 당사간의 투표를 통해 결정하는 것도 가능합니다. 이러한 절차가 약간의 시간을 소모하기 때문에 공격 상황 등에서 <a href="#circuit-breakers-pause-contract-functionality">긴급 정지 혹은 서킷브레이커 발동</a>과 같이 더욱 빠르게 반응할 수 있는 방법에 대해서도 필요할 것입니다.</p>
<p><strong>예시 1: 레지스트리 컨트랙트를 사용하여 최신 버전의 컨트랙트를 저장</strong></p>
<p>이 예시에서는 호출이 전달되는 방식이 아니므로 유저가 직접 매번 현재 주소를 불러온 다음 상호작용 해야만 합니다.</p>
<div class="highlight"><pre><span></span><span class="kd">contract</span> <span class="n">SomeRegister</span> <span class="p">{</span>
    <span class="kt">address</span> <span class="n">backendContract</span><span class="p">;</span>
    <span class="kt">address</span><span class="p">[]</span> <span class="n">previousBackends</span><span class="p">;</span>
    <span class="kt">address</span> <span class="n">owner</span><span class="p">;</span>

    <span class="kd">function</span> <span class="n">SomeRegister</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">modifier</span> <span class="n">onlyOwner</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">require</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span> <span class="o">==</span> <span class="n">owner</span><span class="p">)</span>
        <span class="kr">_</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">changeBackend</span><span class="p">(</span><span class="kt">address</span> <span class="n">newBackend</span><span class="p">)</span> <span class="kr">public</span>
    <span class="n">onlyOwner</span><span class="p">()</span>
    <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">newBackend</span> <span class="o">!=</span> <span class="n">backendContract</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">previousBackends</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">backendContract</span><span class="p">);</span>
            <span class="n">backendContract</span> <span class="o">=</span> <span class="n">newBackend</span><span class="p">;</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>이 방식은 두 개의 주요 단점이 있습니다.</p>
<ol>
<li>사용자가 항상 현재 주소를 확인하고 있어야만 합니다. 그렇지 않은 참가자는 기존 버전의 컨트랙트를 사용하여 실패할 수 있는 리스크를 져야만 합니다.</li>
<li>컨트랙트가 대체되었을 때, 이에 저장된 데이터를 어떻게 다룰 것인가에 대해 생각해야 합니다.</li>
</ol>
<p>이에 대한 대안으로 컨트랙트가 함수 호출과 데이터를 최신 버전의 컨트랙트로 전달하는 방법이 있습니다:</p>
<p><strong>예시 22: <a href="http://ethereum.stackexchange.com/questions/2404/upgradeable-contracts"><code>DELEGATECALL</code>을 사용</a>하여 데이터와 함수 호출을 전달하기</strong></p>
<div class="highlight"><pre><span></span><span class="kd">contract</span> <span class="n">Relay</span> <span class="p">{</span>
    <span class="kt">address</span> <span class="kr">public</span> <span class="n">currentVersion</span><span class="p">;</span>
    <span class="kt">address</span> <span class="kr">public</span> <span class="n">owner</span><span class="p">;</span>

    <span class="kd">modifier</span> <span class="n">onlyOwner</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">require</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span> <span class="o">==</span> <span class="n">owner</span><span class="p">);</span>
        <span class="kr">_</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">Relay</span><span class="p">(</span><span class="kt">address</span> <span class="n">initAddr</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">currentVersion</span> <span class="o">=</span> <span class="n">initAddr</span><span class="p">;</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">;</span> <span class="c1">// 소유자는 단순한 컨트랙트 소유자가 아니라 multisig를 가진 어떤 컨트랙트가 될 것입니다</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="n">changeContract</span><span class="p">(</span><span class="kt">address</span> <span class="n">newVersion</span><span class="p">)</span> <span class="kr">public</span>
    <span class="n">onlyOwner</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">currentVersion</span> <span class="o">=</span> <span class="n">newVersion</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">require</span><span class="p">(</span><span class="n">currentVersion</span><span class="p">.</span><span class="nb">delegatecall</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="n">data</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>이 방법은 통해 기존의 문제점을 해소할 수 있지만 이 또한 고유의 문제가 있습니다. 데이터를 컨트랙트에 어떠헥 저장할 지 극도로 조심해야만 하는 점입니다. 새로운 컨트랙트가 기존 것과 비교하여 다른 스토리지 레이아웃을 가지고 있을 경우 기존 데이터는 손상되어 버릴 것입니다. 더불어서 이 패턴의 간단한 버전은 함수로부터 값을 반환할 수 없고 오직 전달만 하기 때문에 사용성에 제한이 있습니다. (다음의 <a href="https://github.com/ownage-ltd/ether-router">심화된 구현들</a>은 인라인 어셈블리 코드를 사용하고 리턴 값 사이즈에 대한 레지스트리를 사용하여 이 문제를 해결하려 시도 중입니다)</p>
<p>어떤 방식을 사용하던지, 컨트랙트를 업그레이드 하는 ㅂ아법을 가지고 있는 것은 중요합니다. 그렇지 않을 경우 필연적으로 버그를 만날 것이고 결국 사용할 수 없게 될 것입니다.</p>
<h3 id="circuit-breakers">써킷브레이커(Circuit Breakers): 컨트랙트의 기능을 중지하기<a class="headerlink" href="#circuit-breakers" title="Permanent link">&para;</a></h3>
<p>써킷 브레이커는 특정 조건이 만족될 경우 컨트랙트의 실행을 중지시키고 새로운 에러가 발견되었을 때 유용하게 사용될 수 있습니다. 예를 들어, 버그가 발견되었을 경우 대부분의 액션을 중지하고, 출금만 가능하도록 할 수 있습니다. 또한 특정한 신뢰할 수 있는 단체에 서킷 브레이커를 발동할 수 있도록 권한을 주거나 자동으로 실행될 수 있도록 프로그램적인 규칙을 둘 수도 있습니다.</p>
<p>예시:</p>
<div class="highlight"><pre><span></span><span class="kt">bool</span> <span class="kr">private</span> <span class="n">stopped</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kt">address</span> <span class="kr">private</span> <span class="n">owner</span><span class="p">;</span>

<span class="kd">modifier</span> <span class="n">isAdmin</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">require</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span> <span class="o">==</span> <span class="n">owner</span><span class="p">);</span>
    <span class="kr">_</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">toggleContractActive</span><span class="p">()</span> <span class="n">isAdmin</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">// 추가적인 한정자(modifier)를 사용하여 컨트랙트의 중지를 사용자들의 투표에 의한 액션들에 의해서만 가능하도록 한정지을 수 있습니다</span>
    <span class="n">stopped</span> <span class="o">=</span> <span class="o">!</span><span class="n">stopped</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">modifier</span> <span class="n">stopInEmergency</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stopped</span><span class="p">)</span> <span class="kr">_</span><span class="p">;</span> <span class="p">}</span>
<span class="kd">modifier</span> <span class="n">onlyInEmergency</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="n">stopped</span><span class="p">)</span> <span class="kr">_</span><span class="p">;</span> <span class="p">}</span>

<span class="kd">function</span> <span class="n">deposit</span><span class="p">()</span> <span class="n">stopInEmergency</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">// 코드</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">withdraw</span><span class="p">()</span> <span class="n">onlyInEmergency</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">// 코드</span>
<span class="p">}</span>
</pre></div>

<h3 id="speed-bumps">과속 방지턱(Speed Bumps): 컨트랙트 액션 지연<a class="headerlink" href="#speed-bumps" title="Permanent link">&para;</a></h3>
<p>과속방지턱은 액션들의 실행 속도를 줄여주고 악의적인 액션이 발생했을 때 복구할 시간을 확보할 수 있습니다. 예를 들어 [The DAO]는 DAO를 나누기 위한 요청과 그 발동 조건 사이에 27일 간의 시간을 요구합니다. 이 것은 컨트랙트에 포함된 자금이 복구될 수 있는 가능성을 더욱 높여줍니다. DAO의 경우에서는 과속방지턱에 의해 주어진 시간동안 수행할 특별히 효과적인 액션은 없었지만 다른 기법들과 이를 함께 사용한다면 꽤 효과적일 수 있습니다.</p>
<p>예시:</p>
<div class="highlight"><pre><span></span><span class="kd">struct</span> <span class="n">RequestedWithdrawal</span> <span class="p">{</span>
    <span class="kt">uint</span> <span class="n">amount</span><span class="p">;</span>
    <span class="kt">uint</span> <span class="n">time</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="kt">uint</span><span class="p">)</span> <span class="kr">private</span> <span class="n">balances</span><span class="p">;</span>
<span class="kd">mapping</span> <span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="n">RequestedWithdrawal</span><span class="p">)</span> <span class="kr">private</span> <span class="n">requestedWithdrawals</span><span class="p">;</span>
<span class="kt">uint</span> <span class="kr">constant</span> <span class="n">withdrawalWaitPeriod</span> <span class="o">=</span> <span class="mi">28</span> <span class="kc">days</span><span class="p">;</span> <span class="c1">// 4주</span>

<span class="kd">function</span> <span class="n">requestWithdrawal</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">uint</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">];</span>
        <span class="n">balances</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 우선 단순하게 모두 출금합니다</span>
        <span class="c1">// 출금들이 진행 중에 있을 때에는 새로운 예금이 불가능하도록 해야 할 겁니다</span>

        <span class="n">requestedWithdrawals</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">]</span> <span class="o">=</span> <span class="n">RequestedWithdrawal</span><span class="p">({</span>
            <span class="n">amount</span><span class="o">:</span> <span class="n">amountToWithdraw</span><span class="p">,</span>
            <span class="n">time</span><span class="o">:</span> <span class="nb">now</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">withdraw</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">requestedWithdrawals</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">].</span><span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nb">now</span> <span class="o">&gt;</span> <span class="n">requestedWithdrawals</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">].</span><span class="n">time</span> <span class="o">+</span> <span class="n">withdrawalWaitPeriod</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">uint</span> <span class="n">amountToWithdraw</span> <span class="o">=</span> <span class="n">requestedWithdrawals</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">].</span><span class="n">amount</span><span class="p">;</span>
        <span class="n">requestedWithdrawals</span><span class="p">[</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">].</span><span class="n">amount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="n">require</span><span class="p">(</span><span class="nb">msg</span><span class="p">.</span><span class="n">sender</span><span class="p">.</span><span class="nb">send</span><span class="p">(</span><span class="n">amountToWithdraw</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3 id="_2">비율 제한<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>비율 제한은 상당한 양의 변화를 멈추게 하거나 승인을 요하도록 합니다. 예를 들어, 한 예금자가 특정한 금액만 혹은 전체 예금 대비 특정한 비율에 대해서만 시간 간격을 두고 인출하게 만든다면 (즉, 1일당 최대 100 이더) 이를 넘어서는 추가적인 인출 시도는 실패하거나 특별한 인증을 요구하는 방법입니다. 혹은 특정한 양의 토큰이 시간 비율에 따라 발행되도록 컨트랙트 수준에서 비율 제한을 사용할 수도 있습니다.</p>
<p><a href="https://gist.github.com/PeterBorah/110c331dca7d23236f80e69c83a9d58c#file-circuitbreaker-sol">예시</a></p>
<h3 id="contract-rollout">Contract Rollout<a class="headerlink" href="#contract-rollout" title="Permanent link">&para;</a></h3>
<p>컨트랙트는 상당한 자금을 받게 된다면, 위험에 처하지 않도록 꼭 자금을 받기 이전에 충분하고 긴 기간의 테스트 기간을 거쳐야 합니다.</p>
<p>최소한으로 반드시:</p>
<ul>
<li>100% 혹은 그에 근접한 테스트 커버리지를 달성하는 완전한 테스트수트를 가지고 있어야 합니다</li>
<li>테스트 넷을 배포해야 합니다.</li>
<li>공개된 테스트넷에 배포하고 충분한 테스트를 짆애하고 버그 바운티 프로그램을 진행해야 합니다</li>
<li>완전한 테스트를 진행할 때, 다양한 참가자들을 참가시켜 컨트랙트가 규모있게 실행될 수 있도록 해야 합니다</li>
<li>메인넷에 베타를 통해 배포하고 리스크 범위를 제한해야 합니다</li>
</ul>
<h5 id="deprecation">자동 폐기(Deprecation)<a class="headerlink" href="#deprecation" title="Permanent link">&para;</a></h5>
<p>테스트를 진행하면서 추가적인 액션이 실행되지 않도록 일정 시간 이후 자동으로 폐기되는 방법을 쓸 수 있습니다. 예를 들면, 알파 수준의 컨트랙트가 몇 주간 동작하고 난 뒤 마지막에 출금을 제외한 모든 액션을 종료시키도록 할 수 있습니다.</p>
<div class="highlight"><pre><span></span><span class="kd">modifier</span> <span class="n">isActive</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">require</span><span class="p">(</span><span class="nb">block</span><span class="p">.</span><span class="n">number</span> <span class="o">&lt;=</span> <span class="n">SOME_BLOCK_NUMBER</span><span class="p">);</span>
    <span class="kr">_</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">deposit</span><span class="p">()</span> <span class="kr">public</span> <span class="n">isActive</span> <span class="p">{</span>
    <span class="c1">// 코드</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="n">withdraw</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
    <span class="c1">// 코드</span>
<span class="p">}</span>
</pre></div>

<h5 id="_3">사용자 및 컨트랙트에 들어가는 이더의 양을 제한할 것<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<p>초기 상태에서는 사용자나 전체 컨트랙트에 대한 이더의 양을 제한하여 리스크를 줄일 수 있습니다.</p>
<h3 id="_4">버그 바운티 프로그램<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>바운티 프로그램을 운영하기 위한 팁입니다:</p>
<ul>
<li>어떤 통화를 포상으로 줄 것인지 결정해야 합니다 (BTC 혹은 ETH 등)</li>
<li>포상금 총 예산의 추정를 결정해야 합니다</li>
<li>예산에 따라 3 단계로 보상을 정합니다</li>
<li>보상하고 싶은 가장 적은 양의 수준</li>
<li>보상하고 싶은 가장 높은 양의 수준</li>
<li>심각한 취약점을 발견했을 때에 대해 보상을 받을 수 있는 추가 범위</li>
<li>바운티 심사위원이 누가 될 것인지 결정해야 합니다. (보통 3명이 적절할 겁니다)</li>
<li>리드 개발자가 바운티 심사위원 중의 한 명이어야 합니다</li>
<li>버그 리포트를 받았을 때, 리드 개발자는 심사위원진의 자문에 따라 버그의 심각성에 대해 평가해야 합니다</li>
<li>이 단계는 꼭 비공개 계정에서 진행하고 이슈를 깃허브에 정리합니다</li>
<li>버그가 반드시 수정되어야만 하는 종류라면 개발자는 버그를 확실하게 발생시켜 확인할 수 있는 테스트 케이스를 비공개 저장소에 작성합니다</li>
<li>개발자는 수정사항을 구현하고 테스트를 통과하는지 확인합니다. 필요시 추가적인 테스트 케이스를 작성할 수도 있습니다</li>
<li>바운티 사냥꾼에게 수정사항을 보여줍니다. 그리고 수정사항을 공개 저장소에 통합합니다</li>
<li>바운티 사냥꾼이 이 수정사항에 아무런 피드백이 없는지 확인합니다</li>
<li>바운티 심사위원은 해당 버그의 <em>발생 가능성</em> 과 <em>중요성</em> 에 의거하여 보상의 크기를 결정합니다</li>
<li>바운티 참가자들이 전체 프로세스 진행을 계속해서 알 수 있도록 하고, 보상의 지급이 늦어지지 않는 것을 크게 신경써야 합니다</li>
</ul>
<p>예를 들어 다음 3 단계의 보상이 있습니다. <a href="https://bounty.ethereum.org">이더리움의 바운티 프로그램</a>을 확인하세요:</p>
<blockquote>
<p>지불되는 보상의 크기는 버그의 심각성의 크기에 따라 달라집니다. 마이너한 크게 무해한 버그의 경우에는 0.05 BTC에서 시작합니다. 중요한 버그의 경우에는 특히 합의 이슈 등과 관련한 경우 5BTC을 보상으로 받게 됩니다. 아주 심각한 취약점을 발견했을 경우에는 25 BTC까지 더욱 높은 보상 또한 가능합니다.</p>
</blockquote>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">

        <!-- Link to previous page -->
        
          <a href="../known_attacks/"
              title="알려진 공격 사례"
              class="md-flex md-footer-nav__link md-footer-nav__link--prev"
              rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back
                    md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                알려진 공격 사례
              </span>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a href="../tokens/" title="토큰과 관련된 모범 사례"
              class="md-flex md-footer-nav__link md-footer-nav__link--next"
              rel="next">
            <div class="md-flex__cell md-flex__cell--stretch
                  md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                토큰과 관련된 모범 사례
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward
                    md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>

      <!-- Customization: Diligence info -->
      <div class="md-footer-diligence">

        maintained by
        <a href="https://diligence.consensys.net" target="_blank" rel="noopener">
          <img src="../../../assets/images/diligence_logo.svg" />
          ConsenSys Diligence
        </a>
      </div>

      <!-- Social links -->
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.6cdc17f0.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>